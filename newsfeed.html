<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home - Bahala Ka</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap');
    
    body {
      font-family: 'Poppins', system-ui, -apple-system, sans-serif;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    .animated-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background: #f5f7fa;
    }
    
    .navbar {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .post-card, .create-post-card {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.97);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .post-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
    }
    
    .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 600;
      flex-shrink: 0;
    }
    
    .avatar-small {
      width: 40px;
      height: 40px;
      font-size: 1.25rem;
    }
    
    .post-image {
      width: 100%;
      height: 300px;
      background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%);
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
      margin-top: 1rem;
    }
    
    .action-button {
      transition: all 0.2s ease;
      cursor: pointer;
      border: none;
      background: transparent;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
    }
    
    .action-button:hover {
      background: rgba(102, 126, 234, 0.1);
    }
    
    .action-button.liked {
      color: #ef4444;
    }
    
    .comment-box {
      background: rgba(248, 250, 252, 0.8);
      padding: 0.75rem;
      border-radius: 0.75rem;
      margin-bottom: 0.5rem;
      position: relative;
    }
    
    .comment-delete-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0.25rem;
      border-radius: 0.25rem;
      transition: background 0.2s ease;
      font-size: 1rem;
    }
    
    .comment-delete-btn:hover {
      background: rgba(239, 68, 68, 0.1);
    }
    
    .share-notification {
      position: fixed;
      top: 5rem;
      right: 2rem;
      background: rgba(16, 185, 129, 0.95);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 0.75rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .post-button {
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
    }
    
    .post-button:hover:not(:disabled) {
      transform: scale(1.05);
    }
    
    .post-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .post-input {
      border: 2px solid #e2e8f0;
      border-radius: 1.5rem;
      padding: 1rem 1.5rem;
      width: 100%;
      resize: none;
      outline: none;
      transition: all 0.3s ease;
      font-family: inherit;
    }
    
    .post-input:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeOut {
      from {
        opacity: 1;
        transform: scale(1);
      }
      to {
        opacity: 0;
        transform: scale(0.95);
      }
    }
    
    .user-menu {
      cursor: pointer;
      transition: background 0.2s ease;
      padding: 0.5rem;
      border-radius: 0.75rem;
    }
    
    .user-menu:hover {
      background: rgba(102, 126, 234, 0.1);
    }
    
    .logout-btn:hover {
      background: #dc2626 !important;
      transform: scale(1.05);
    }
    
    .logout-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1001;
      animation: fadeIn 0.3s ease;
    }
    
    .logout-modal-content {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideIn 0.3s ease;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app-wrapper" class="w-full h-full overflow-auto">
   <div class="animated-bg"></div><!-- Navigation Bar -->
   <nav class="navbar">
    <div class="max-w-4xl mx-auto px-6 py-4 flex items-center justify-between">
     <div class="flex items-center gap-3">
      <svg width="40" height="40" viewbox="0 0 40 40" style="flex-shrink: 0;"><defs>
        <lineargradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
         <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
         <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
        </lineargradient>
       </defs> <circle cx="20" cy="20" r="18" fill="url(#logoGradient)" /> <text x="20" y="28" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white" text-anchor="middle">
        BK
       </text>
      </svg>
      <h1 id="site-title" class="font-black text-2xl"></h1>
     </div>
     <div class="flex items-center gap-3">
      <div class="user-menu flex items-center gap-3">
       <div class="avatar avatar-small" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        üë§
       </div>
      </div><button id="logout-btn" class="logout-btn" style="padding: 0.5rem 1.5rem; border-radius: 1.5rem; border: none; cursor: pointer; font-weight: 600; background: #ef4444; color: white; transition: all 0.3s ease;"> Logout </button>
     </div>
    </div>
   </nav><!-- Main Feed -->
   <main class="max-w-3xl mx-auto px-6 py-8 relative z-10"><!-- Create Post Card -->
    <div class="create-post-card rounded-2xl p-6 mb-6 fade-in">
     <div class="flex gap-3">
      <div class="avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
       üë§
      </div>
      <div class="flex-1"><textarea id="post-input" class="post-input" rows="3" placeholder=""></textarea>
       <div class="flex justify-end mt-3"><button id="post-button" class="post-button font-bold px-6 py-2 rounded-full text-white"></button>
       </div>
      </div>
     </div>
    </div><!-- Posts Feed -->
    <div id="posts-container"><!-- Post 1 -->
     <article class="post-card rounded-2xl p-6 mb-6 fade-in">
      <div class="flex gap-3 mb-4">
       <div id="avatar-1" class="avatar">
        üòä
       </div>
       <div class="flex-1">
        <h3 id="post-1-author" class="font-bold"></h3>
        <p class="text-sm opacity-60">2 hours ago</p>
       </div>
      </div>
      <p id="post-1-content" class="mb-3"></p>
      <div class="post-image">
       üì∏
      </div>
      <div class="flex gap-2 mt-4 pt-4 border-t border-gray-200"><button class="action-button like-btn"> <span>‚ù§Ô∏è</span> <span class="like-count">24</span> </button> <button class="action-button comment-btn"> <span>üí¨</span> <span class="comment-count">8</span> </button> <button class="action-button share-btn"> <span>üîÑ</span> <span>Share</span> </button>
      </div>
      <div class="comment-section" style="display: none; margin-top: 1rem;">
       <div class="comments-list" style="margin-bottom: 1rem;"></div>
       <div class="flex gap-3"><input type="text" class="comment-input" placeholder="Write a comment..." style="flex: 1; padding: 0.5rem 1rem; border: 2px solid #e2e8f0; border-radius: 1.5rem; outline: none;"> <button class="comment-submit-btn" style="padding: 0.5rem 1.5rem; border-radius: 1.5rem; border: none; cursor: pointer; font-weight: 600;">Post</button>
       </div>
      </div>
     </article><!-- Post 2 -->
     <article class="post-card rounded-2xl p-6 mb-6 fade-in">
      <div class="flex gap-3 mb-4">
       <div id="avatar-2" class="avatar">
        üé®
       </div>
       <div class="flex-1">
        <h3 id="post-2-author" class="font-bold"></h3>
        <p class="text-sm opacity-60">5 hours ago</p>
       </div>
      </div>
      <p id="post-2-content" class="mb-3"></p>
      <div class="flex gap-2 mt-4 pt-4 border-t border-gray-200"><button class="action-button like-btn"> <span>‚ù§Ô∏è</span> <span class="like-count">142</span> </button> <button class="action-button comment-btn"> <span>üí¨</span> <span class="comment-count">23</span> </button> <button class="action-button share-btn"> <span>üîÑ</span> <span>Share</span> </button>
      </div>
      <div class="comment-section" style="display: none; margin-top: 1rem;">
       <div class="comments-list" style="margin-bottom: 1rem;"></div>
       <div class="flex gap-3"><input type="text" class="comment-input" placeholder="Write a comment..." style="flex: 1; padding: 0.5rem 1rem; border: 2px solid #e2e8f0; border-radius: 1.5rem; outline: none;"> <button class="comment-submit-btn" style="padding: 0.5rem 1.5rem; border-radius: 1.5rem; border: none; cursor: pointer; font-weight: 600;">Post</button>
       </div>
      </div>
     </article><!-- Post 3 -->
     <article class="post-card rounded-2xl p-6 mb-6 fade-in">
      <div class="flex gap-3 mb-4">
       <div id="avatar-3" class="avatar">
        üåü
       </div>
       <div class="flex-1">
        <h3 id="post-3-author" class="font-bold"></h3>
        <p class="text-sm opacity-60">1 day ago</p>
       </div>
      </div>
      <p id="post-3-content" class="mb-3"></p>
      <div class="post-image">
       üéâ
      </div>
      <div class="flex gap-2 mt-4 pt-4 border-t border-gray-200"><button class="action-button like-btn"> <span>‚ù§Ô∏è</span> <span class="like-count">89</span> </button> <button class="action-button comment-btn"> <span>üí¨</span> <span class="comment-count">15</span> </button> <button class="action-button share-btn"> <span>üîÑ</span> <span>Share</span> </button>
      </div>
      <div class="comment-section" style="display: none; margin-top: 1rem;">
       <div class="comments-list" style="margin-bottom: 1rem;"></div>
       <div class="flex gap-3"><input type="text" class="comment-input" placeholder="Write a comment..." style="flex: 1; padding: 0.5rem 1rem; border: 2px solid #e2e8f0; border-radius: 1.5rem; outline: none;"> <button class="comment-submit-btn" style="padding: 0.5rem 1.5rem; border-radius: 1.5rem; border: none; cursor: pointer; font-weight: 600;">Post</button>
       </div>
      </div>
     </article>
    </div>
   </main>
  </div>
  <script>
    const defaultConfig = {
      background_color: "#667eea",
      surface_color: "#ffffff",
      text_color: "#1a202c",
      primary_action_color: "#f59e0b",
      secondary_action_color: "#764ba2",
      font_family: "Poppins",
      font_size: 16,
      site_title: "Bahala Ka",
      post_placeholder: "What's on your mind?",
      post_button_text: "Post",
      post_1_author: "Maria Santos",
      post_1_content: "Just discovered this amazing coffee shop in the city! The vibes are immaculate ‚òï‚ú® Who wants to join me next time?",
      post_2_author: "Juan Dela Cruz",
      post_2_content: "Finally finished my art project after weeks of work! So proud of how it turned out. Never give up on your dreams! üé®üí™",
      post_3_author: "Sarah Johnson",
      post_3_content: "Celebrating our team's big win today! Grateful for everyone who believed in us from the start. Here's to more success! üéâüèÜ"
    };

    async function onConfigChange(config) {
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      const fontFamily = `${customFont}, ${baseFontStack}`;
      const baseSize = config.font_size || defaultConfig.font_size;
      
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;
      
      const animatedBg = document.querySelector('.animated-bg');
      if (animatedBg) {
        animatedBg.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${secondaryActionColor} 100%)`;
      }
      
      document.body.style.fontFamily = fontFamily;
      
      const navbar = document.querySelector('.navbar');
      navbar.style.backgroundColor = surfaceColor;
      navbar.style.color = textColor;
      
      const cards = document.querySelectorAll('.post-card, .create-post-card');
      cards.forEach(card => {
        card.style.backgroundColor = surfaceColor;
        card.style.color = textColor;
      });
      
      const siteTitle = document.getElementById('site-title');
      siteTitle.style.fontSize = `${baseSize * 1.5}px`;
      siteTitle.style.color = textColor;
      siteTitle.textContent = config.site_title || defaultConfig.site_title;
      
      const postInput = document.getElementById('post-input');
      postInput.style.fontSize = `${baseSize}px`;
      postInput.placeholder = config.post_placeholder || defaultConfig.post_placeholder;
      
      const postButton = document.getElementById('post-button');
      postButton.style.fontSize = `${baseSize}px`;
      postButton.style.backgroundColor = primaryActionColor;
      postButton.textContent = config.post_button_text || defaultConfig.post_button_text;
      
      const avatars = document.querySelectorAll('.avatar');
      avatars.forEach((avatar, index) => {
        if (index === 0 || index === 1) {
          avatar.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${secondaryActionColor} 100%)`;
        } else if (index === 2) {
          avatar.style.background = `linear-gradient(135deg, ${primaryActionColor} 0%, ${backgroundColor} 50%)`;
        } else if (index === 3) {
          avatar.style.background = `linear-gradient(135deg, ${secondaryActionColor} 0%, ${primaryActionColor} 100%)`;
        } else if (index === 4) {
          avatar.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${primaryActionColor} 100%)`;
        }
        avatar.style.color = 'white';
      });
      
      const post1Author = document.getElementById('post-1-author');
      post1Author.style.fontSize = `${baseSize * 1.125}px`;
      post1Author.textContent = config.post_1_author || defaultConfig.post_1_author;
      
      const post1Content = document.getElementById('post-1-content');
      post1Content.style.fontSize = `${baseSize}px`;
      post1Content.textContent = config.post_1_content || defaultConfig.post_1_content;
      
      const post2Author = document.getElementById('post-2-author');
      post2Author.style.fontSize = `${baseSize * 1.125}px`;
      post2Author.textContent = config.post_2_author || defaultConfig.post_2_author;
      
      const post2Content = document.getElementById('post-2-content');
      post2Content.style.fontSize = `${baseSize}px`;
      post2Content.textContent = config.post_2_content || defaultConfig.post_2_content;
      
      const post3Author = document.getElementById('post-3-author');
      post3Author.style.fontSize = `${baseSize * 1.125}px`;
      post3Author.textContent = config.post_3_author || defaultConfig.post_3_author;
      
      const post3Content = document.getElementById('post-3-content');
      post3Content.style.fontSize = `${baseSize}px`;
      post3Content.textContent = config.post_3_content || defaultConfig.post_3_content;
      
      const actionButtons = document.querySelectorAll('.action-button');
      actionButtons.forEach(btn => {
        btn.style.fontSize = `${baseSize * 0.875}px`;
        btn.style.color = textColor;
      });
      
      const commentSubmitButtons = document.querySelectorAll('.comment-submit-btn');
      commentSubmitButtons.forEach(btn => {
        btn.style.backgroundColor = primaryActionColor;
        btn.style.color = 'white';
      });
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              config.primary_action_color = value;
              window.elementSdk.setConfig({ primary_action_color: value });
            }
          },
          {
            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              config.secondary_action_color = value;
              window.elementSdk.setConfig({ secondary_action_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            window.elementSdk.setConfig({ font_size: value });
          }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["site_title", config.site_title || defaultConfig.site_title],
        ["post_placeholder", config.post_placeholder || defaultConfig.post_placeholder],
        ["post_button_text", config.post_button_text || defaultConfig.post_button_text],
        ["post_1_author", config.post_1_author || defaultConfig.post_1_author],
        ["post_1_content", config.post_1_content || defaultConfig.post_1_content],
        ["post_2_author", config.post_2_author || defaultConfig.post_2_author],
        ["post_2_content", config.post_2_content || defaultConfig.post_2_content],
        ["post_3_author", config.post_3_author || defaultConfig.post_3_author],
        ["post_3_content", config.post_3_content || defaultConfig.post_3_content]
      ]);
    }

    // Logout button functionality
    document.getElementById('logout-btn').addEventListener('click', function() {
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const baseSize = config.font_size || defaultConfig.font_size;
      
      const modal = document.createElement('div');
      modal.className = 'logout-modal';
      modal.innerHTML = `
        <div class="logout-modal-content">
          <h2 style="font-size: ${baseSize * 1.5}px; font-weight: 700; margin-bottom: 1rem; color: ${textColor};">Confirm Logout</h2>
          <p style="font-size: ${baseSize}px; margin-bottom: 1.5rem; color: ${textColor}; opacity: 0.8;">Are you sure you want to log out?</p>
          <div style="display: flex; gap: 0.75rem; justify-content: flex-end;">
            <button class="cancel-logout-btn" style="padding: 0.75rem 1.5rem; border-radius: 0.75rem; border: 2px solid #e2e8f0; background: white; cursor: pointer; font-weight: 600; color: ${textColor}; font-size: ${baseSize}px; transition: all 0.2s ease;">Cancel</button>
            <button class="confirm-logout-btn" style="padding: 0.75rem 1.5rem; border-radius: 0.75rem; border: none; background: #ef4444; color: white; cursor: pointer; font-weight: 600; font-size: ${baseSize}px; transition: all 0.2s ease;">Logout</button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      modal.querySelector('.cancel-logout-btn').addEventListener('click', function() {
        modal.remove();
      });
      
      modal.querySelector('.confirm-logout-btn').addEventListener('click', function() {
  modal.style.animation = 'fadeOut 0.3s ease';
  setTimeout(() => {
    modal.remove();

    const successNotification = document.createElement('div');
    successNotification.className = 'share-notification';
    successNotification.style.background = 'rgba(34, 197, 94, 0.95)';
    successNotification.textContent = '‚úì You have been logged out!';
    document.body.appendChild(successNotification);

    setTimeout(() => {
      successNotification.remove();
      window.location.href = "joinpage.html"; // üîê redirect to login
    }, 1200);

  }, 300);
});
      
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          modal.remove();
        }
      });
    });
    
    // Universal click handler for ALL buttons using event delegation
    document.addEventListener('click', function(e) {
      const target = e.target;
      
      // Like button
      if (target.closest('.like-btn')) {
        const btn = target.closest('.like-btn');
        const likeCount = btn.querySelector('.like-count');
        const currentCount = parseInt(likeCount.textContent);
        
        if (btn.classList.contains('liked')) {
          btn.classList.remove('liked');
          likeCount.textContent = currentCount - 1;
        } else {
          btn.classList.add('liked');
          likeCount.textContent = currentCount + 1;
        }
      }
      
      // Comment button
      if (target.closest('.comment-btn')) {
        const btn = target.closest('.comment-btn');
        const postCard = btn.closest('.post-card');
        const commentSection = postCard.querySelector('.comment-section');
        
        if (commentSection) {
          if (commentSection.style.display === 'none' || commentSection.style.display === '') {
            commentSection.style.display = 'block';
          } else {
            commentSection.style.display = 'none';
          }
        }
      }
      
      // Share button
      if (target.closest('.share-btn')) {
        const notification = document.createElement('div');
        notification.className = 'share-notification';
        notification.textContent = '‚úì Post shared successfully!';
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.remove();
        }, 3000);
      }
      
      // Delete button
      if (target.closest('.delete-btn')) {
        const btn = target.closest('.delete-btn');
        const postCard = btn.closest('.post-card');
        
        const confirmDiv = document.createElement('div');
        confirmDiv.style.cssText = 'margin-top: 1rem; padding: 1rem; background: rgba(239, 68, 68, 0.1); border-radius: 0.5rem;';
        confirmDiv.innerHTML = `
          <p style="margin-bottom: 0.75rem; font-weight: 600;">Are you sure you want to delete this post?</p>
          <div style="display: flex; gap: 0.5rem;">
            <button class="confirm-delete-btn" style="padding: 0.5rem 1rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; cursor: pointer; font-weight: 600;">Delete</button>
            <button class="cancel-delete-btn" style="padding: 0.5rem 1rem; background: #6b7280; color: white; border: none; border-radius: 0.5rem; cursor: pointer; font-weight: 600;">Cancel</button>
          </div>
        `;
        
        const existingConfirm = postCard.querySelector('.confirm-delete-container');
        if (existingConfirm) existingConfirm.remove();
        
        confirmDiv.className = 'confirm-delete-container';
        postCard.appendChild(confirmDiv);
      }
      
      // Confirm delete
      if (target.classList.contains('confirm-delete-btn')) {
        const postCard = target.closest('.post-card');
        postCard.style.animation = 'fadeOut 0.3s ease-out';
        setTimeout(() => {
          postCard.remove();
        }, 300);
      }
      
      // Cancel delete
      if (target.classList.contains('cancel-delete-btn')) {
        const confirmDiv = target.closest('.confirm-delete-container');
        confirmDiv.remove();
      }
      
      // Comment submit
      if (target.classList.contains('comment-submit-btn')) {
        const commentSection = target.closest('.comment-section');
        if (!commentSection) return;
        
        const commentInput = commentSection.querySelector('.comment-input');
        const commentsList = commentSection.querySelector('.comments-list');
        const commentText = commentInput.value.trim();
        
        if (!commentText) return;
        
        const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
        const baseSize = config.font_size || defaultConfig.font_size;
        
        const commentBox = document.createElement('div');
        commentBox.className = 'comment-box';
        commentBox.innerHTML = `
          <button class="comment-delete-btn">‚ùå</button>
          <p style="font-weight: 600; margin-bottom: 0.25rem; font-size: ${baseSize * 0.875}px;">You</p>
          <p style="font-size: ${baseSize * 0.875}px; padding-right: 2rem;">${commentText}</p>
        `;
        
        commentsList.appendChild(commentBox);
        commentInput.value = '';
        
        const postCard = commentSection.closest('.post-card');
        const commentBtn = postCard.querySelector('.comment-btn');
        const commentCount = commentBtn.querySelector('.comment-count');
        commentCount.textContent = parseInt(commentCount.textContent) + 1;
      }
      
      // Comment delete
      if (target.classList.contains('comment-delete-btn')) {
        const commentBox = target.closest('.comment-box');
        const commentSection = commentBox.closest('.comment-section');
        
        commentBox.remove();
        
        const postCard = commentSection.closest('.post-card');
        const commentBtn = postCard.querySelector('.comment-btn');
        const commentCount = commentBtn.querySelector('.comment-count');
        commentCount.textContent = Math.max(0, parseInt(commentCount.textContent) - 1);
      }
    });

    // Post button functionality
    const postButton = document.getElementById('post-button');
    const postInput = document.getElementById('post-input');
    const postsContainer = document.getElementById('posts-container');

    postButton.addEventListener('click', async function() {
      const content = postInput.value.trim();
      
      if (!content) return;
      
      postButton.disabled = true;
      postButton.textContent = 'Posting...';
      
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const baseSize = config.font_size || defaultConfig.font_size;
      
      const newPost = document.createElement('article');
      newPost.className = 'post-card rounded-2xl p-6 mb-6 fade-in';
      newPost.style.backgroundColor = surfaceColor;
      newPost.style.color = textColor;
      
      newPost.innerHTML = `
        <div class="flex gap-3 mb-4">
          <div class="avatar" style="background: linear-gradient(135deg, ${backgroundColor} 0%, ${secondaryActionColor} 100%); color: white;">üë§</div>
          <div class="flex-1">
            <h3 class="font-bold" style="font-size: ${baseSize * 1.125}px;">You</h3>
            <p class="text-sm opacity-60">Just now</p>
          </div>
        </div>
        <p style="font-size: ${baseSize}px;">${content}</p>
        <div class="flex gap-2 mt-4 pt-4 border-t border-gray-200">
          <button class="action-button like-btn" style="font-size: ${baseSize * 0.875}px; color: ${textColor};">
            <span>‚ù§Ô∏è</span>
            <span class="like-count">0</span>
          </button>
          <button class="action-button comment-btn" style="font-size: ${baseSize * 0.875}px; color: ${textColor};">
            <span>üí¨</span>
            <span class="comment-count">0</span>
          </button>
          <button class="action-button share-btn" style="font-size: ${baseSize * 0.875}px; color: ${textColor};">
            <span>üîÑ</span>
            <span>Share</span>
          </button>
          <button class="action-button delete-btn" style="font-size: ${baseSize * 0.875}px; color: ${textColor};">
            <span>üóëÔ∏è</span>
            <span>Delete</span>
          </button>
        </div>
        <div class="comment-section" style="display: none; margin-top: 1rem;">
          <div class="comments-list" style="margin-bottom: 1rem;"></div>
          <div class="flex gap-3">
            <input type="text" class="comment-input" placeholder="Write a comment..." style="flex: 1; padding: 0.5rem 1rem; border: 2px solid #e2e8f0; border-radius: 1.5rem; outline: none;">
            <button class="comment-submit-btn" style="padding: 0.5rem 1.5rem; border-radius: 1.5rem; border: none; cursor: pointer; font-weight: 600; background: ${primaryActionColor}; color: white;">Post</button>
          </div>
        </div>
      `;
      
      postsContainer.insertBefore(newPost, postsContainer.firstChild);
      
      postButton.textContent = config.post_button_text || defaultConfig.post_button_text;
      postButton.disabled = false;
      postInput.value = '';
      
      postInput.placeholder = 'Post shared successfully! ‚ú®';
      setTimeout(() => {
        postInput.placeholder = config.post_placeholder || defaultConfig.post_placeholder;
      }, 2000);
    });

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    onConfigChange(window.elementSdk ? window.elementSdk.config : defaultConfig);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b9abfea623f8d0f',t:'MTc2NzY5NzYyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>